# Data Schema

This document describes the JSON files generated by `scripts/parse_fit.py`.

## Output Files

`activities.json`
- Array of per-activity records (one FIT file -> one activity).
- Fields:
  - `id` (string): stable id for the activity.
  - `sourceFile` (string): original FIT filename.
  - `sport` (string): expected `running`.
  - `startTime` (string): ISO-8601 local timestamp (with offset).
  - `startTimeUtc` (string): ISO-8601 UTC timestamp.
  - `date` (string): `YYYY-MM-DD` derived from local time.
  - `distanceM` (number): meters.
  - `durationS` (number): seconds.
  - `paceSecPerKm` (number or null): seconds per kilometer.
  - `avgHr` (number or null): average heart rate.
  - `lat` / `lon` (number or null): start coordinate in degrees.
  - `city` (string): city name or `unknown`.
  - `country` (string or null): country code.
  - `admin1` (string or null): admin1 code.

`daily.json`
- Array of per-day aggregates, used by the heatmap.
- Fields:
  - `date` (string): `YYYY-MM-DD`.
  - `distanceM` (number): total distance for the day.
  - `durationS` (number): total duration for the day.
  - `activities` (array): summary records for tooltip display:
    - `id`, `startTime`, `startTimeUtc`, `distanceM`, `durationS`, `paceSecPerKm`, `avgHr`.

`summary.json`
- Overall summary for top cards.
- Fields:
  - `totalDays` (number): days with at least one run.
  - `totalDistanceM` (number): meters.
  - `avgDistancePerDayM` (number): meters per running day.

`monthly.json`
- Array of monthly aggregates.
- Fields:
  - `year` (number), `month` (number)
  - `distanceM` (number)
  - `durationS` (number)
  - `days` (number): count of running days in the month.

`city-stats.json`
- Array of city aggregates.
- Fields:
  - `city`, `country`, `admin1`
  - `runs` (number): activity count.
  - `distanceM` (number)
  - `avgPaceSecPerKm` (number or null)

`distributions.json`
- Distribution data for charts. Each bin includes both counts and distance.
- Fields:
  - `paceSecPerKm`: bins by pace (seconds per km).
  - `avgHr`: bins by average heart rate.
  - `distanceM`: bins by activity distance (meters).
- Each distribution object:
  - `binSize` (number)
  - `bins` (array of objects):
    - `start` (number), `end` (number)
    - `count` (number): activity count in bin.
    - `distanceM` (number): summed distance in bin.

## Notes

- Timezone: `startTime`/`date` use local timezone; `startTimeUtc` remains UTC.
- Distances are meters; pace is seconds per kilometer.
